<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>Структура приложения — Sergey Sova</title>

  <!-- CSS -->
  <link rel="stylesheet" href="https:&#x2F;&#x2F;sova.dev&#x2F;print.css" media="print">
  <link rel="stylesheet" href="https:&#x2F;&#x2F;sova.dev&#x2F;poole.css">
  <link rel="stylesheet" href="https:&#x2F;&#x2F;sova.dev&#x2F;hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" />
  <link rel="alternate" type="application/rss+xml" title="Сова говорит…" href="https://feeds.simplecast.com/1xtMFVVp" />

  
  <meta property="og:type" content="article" />
  <meta property="og:site_name" content="Sergey Sova" />
  <meta property="og:image" content="http://www.gravatar.com/avatar/7a4aef267d44e7dc69dcd66d4a99aae4.jpg?s=512" />
  <meta name="telegram:channel" content="@sergeysova">
  <meta property="twitter:site" content="@_sergeysova" />
  <meta property="twitter:creator" content="@_sergeysova" />
  <meta property="twitter:image" content="http://www.gravatar.com/avatar/7a4aef267d44e7dc69dcd66d4a99aae4.jpg?s=512" />
  
<meta property="og:title" content="Структура приложения" />
<meta property="og:published_time" content="2019-08-20T00:00:00+0000" />
<meta property="telegram:unixtime" content="1566259200" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Структура приложения" />

<meta property="og:description" content="Где искать файлики в проекте и куда класть новые" />
<meta name="twitter:description" content="Где искать файлики в проекте и куда класть новые" />

<meta property="og:url" content="https://sova.dev/ru/application-structure/" />

</head>

<body class="theme-base-0d ">
  <a style="display: none;" rel="me" href="https://mastodon.social/@sergeysova">Mastodon</a>
  
  
  <aside class="sidebar">
    <div class="container sidebar-sticky">
      <div class="sidebar-about">
        
        <a href="https:&#x2F;&#x2F;sova.dev">
          <h1>Sergey Sova</h1>
        </a>
        
        <p class="lead">Notes about development</p>
         
      </div>

      <ul class="sidebar-nav">
         
        <li class="sidebar-nav-item">
          <a href="https:&#x2F;&#x2F;github.com&#x2F;sergeysova">Github</a>
        </li>
        
        <li class="sidebar-nav-item">
          <a href="https:&#x2F;&#x2F;t.me&#x2F;sergeysova">Telegram</a>
        </li>
        
        <li class="sidebar-nav-item">
          <a href="https:&#x2F;&#x2F;twitter.com&#x2F;_sergeysova">Twitter</a>
        </li>
        
        <li class="sidebar-nav-item">
          <a href="https:&#x2F;&#x2F;podcast.sova.dev">Подкаст</a>
        </li>
        
        <li class="sidebar-nav-item">
          <a href="https:&#x2F;&#x2F;vk.com&#x2F;sovadev">VK.com</a>
        </li>
         
        <li>
           <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="sergeysova" data-color="#5F7FFF" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000" data-font-color="#fff" data-coffee-color="#fd0" ></script>
        </li>
      </ul>
    </div>
  </aside>
  

  <div class="content container">
    
<article class="post">
  <h2 class="post-title">Структура приложения</h2>
  <time datetime="2019-08-20T00:00:00+00:00"
    class="post-date">August 20 2019</time>
  
  <ul>
    
    <li><a href="https://sova.dev/ru/application-structure/#1-struktura-feature">1. Структура feature:</a></li>
    
    <ul>
      
      <li><a href="https://sova.dev/ru/application-structure/#1-1-atomic-in-feature">1.1 Atomic in Feature</a></li>
      
      
    </ul>
    
    
    <li><a href="https://sova.dev/ru/application-structure/#2-struktura-pages">2. Структура pages:</a></li>
    
    
    <li><a href="https://sova.dev/ru/application-structure/#3-struktura-ui">3. Структура UI:</a></li>
    
    
  </ul>
  <hr />
  
  <p><a href="https://featureslices.dev/v0.1"><img src="https://img.shields.io/badge/feature/slices-0.1-orange" alt="" /></a></p>
<p>Исходный код приложения я разделяю на <code>features/</code>, <code>ui/</code> и <code>pages/</code>.<br/>
<strong>Логика</strong> может лежать только в <code>pages/</code> и в <code>features/</code>.</p>
<p>Пример:</p>
<blockquote>
<p>▸ — значок свёрнутой директории в дереве</p>
</blockquote>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">src/
</span><span style="color:#dcdcdc;">  api/▸
</span><span style="color:#dcdcdc;">  features/▸
</span><span style="color:#dcdcdc;">  lib/▸
</span><span style="color:#dcdcdc;">  pages/▸
</span><span style="color:#dcdcdc;">  ui/▸
</span></pre><h2 id="1-struktura-feature">1. Структура <a href="https://t.me/feature_slices">feature</a>:</h2>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">src/
</span><span style="color:#dcdcdc;">  features/
</span><span style="color:#dcdcdc;">    account/▸
</span><span style="color:#dcdcdc;">    editor/▸
</span><span style="color:#dcdcdc;">    settings/▸
</span><span style="color:#dcdcdc;">    users/
</span><span style="color:#dcdcdc;">      atoms/
</span><span style="color:#dcdcdc;">        index.js
</span><span style="color:#dcdcdc;">        avatar.js
</span><span style="color:#dcdcdc;">      lib/
</span><span style="color:#dcdcdc;">        lib-name/
</span><span style="color:#dcdcdc;">          index.js
</span><span style="color:#dcdcdc;">          test.js
</span><span style="color:#dcdcdc;">          readme.md
</span><span style="color:#dcdcdc;">      models/▸
</span><span style="color:#dcdcdc;">      molecules/▸
</span><span style="color:#dcdcdc;">      organisms/▸
</span><span style="color:#dcdcdc;">      templates/▸
</span><span style="color:#dcdcdc;">      index.js
</span></pre>
<p><a href="https://t.me/feature_slices">Фича</a> — полезная функциональность для пользователя, или набор сущностей объединенных одной идеей. Например: пользователи, текстовый-редактор, аккаунт, статьи.</p>
<p><a href="https://t.me/feature_slices">Фича</a> не может быть группировкой по типу, слишком абстрактной сущностью. Примеры <strong>как не надо</strong>: роли, формы, валидации.</p>
<ol>
<li>Каждая фича имеет одинаковую структуру.</li>
<li><code>users</code>, <code>account</code>, ... — произвольное название фичи в param-case</li>
<li>Содержимое фичи можно получать только через <code>index.js</code></li>
<li>Каждый раздел создается, только если в нем есть содержимое.</li>
</ol>
<ul>
<li><code>lib/</code> это <a href="https://sova.dev/ru/why-utils-and-helpers-is-a-dump/">внутренняя библиотека</a> фичи. Должна иметь тесты и документацию.</li>
<li><code>index.js</code> ре-экспортит необходимые элементы наружу.</li>
<li><code>models/</code> — <a href="https://sova.dev/ru/effector-model-structure/">модели effector</a></li>
</ul>
<h3 id="1-1-atomic-in-feature">1.1 <a href="http://atomicdesign.bradfrost.com">Atomic</a> in <a href="https://t.me/feature_slices">Feature</a></h3>
<p><code>atoms</code>, <code>molecules</code>, <code>organisms</code>, <code>templates</code> — <a href="http://atomicdesign.bradfrost.com">atomic design</a>, компоненты <a href="https://t.me/feature_slices">фичи</a>.</p>
<p>Если предполагается много файлов на каждый компонент (<code>.test</code>, <code>.story</code>, <code>.md</code>, ...):</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">feature/
</span><span style="color:#dcdcdc;">  users/
</span><span style="color:#dcdcdc;">    atoms/▸
</span><span style="color:#dcdcdc;">    molecules/
</span><span style="color:#dcdcdc;">      personal-apply/▸
</span><span style="color:#dcdcdc;">      user-card/
</span><span style="color:#dcdcdc;">        index.js
</span><span style="color:#dcdcdc;">        story.js
</span><span style="color:#dcdcdc;">        test.js
</span><span style="color:#dcdcdc;">        readme.md
</span><span style="color:#dcdcdc;">    organisms/▸
</span><span style="color:#dcdcdc;">    templates/▸
</span></pre>
<p>Если файлов мало, можно не создавать директорию. Главное, чтобы в пределах фичи выглядело одинаково.</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">feature/
</span><span style="color:#dcdcdc;">  settings/
</span><span style="color:#dcdcdc;">    atoms/▸
</span><span style="color:#dcdcdc;">    molecules/▸
</span><span style="color:#dcdcdc;">    organisms/
</span><span style="color:#dcdcdc;">      monitoring-editor.js
</span><span style="color:#dcdcdc;">      monitoring-editor.test.js
</span><span style="color:#dcdcdc;">      marketplace.js
</span><span style="color:#dcdcdc;">      marketplace.test.js
</span></pre><h2 id="2-struktura-pages">2. Структура pages:</h2>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">src/
</span><span style="color:#dcdcdc;">  pages/
</span><span style="color:#dcdcdc;">    post/
</span><span style="color:#dcdcdc;">      model.js
</span><span style="color:#dcdcdc;">      page.js
</span><span style="color:#dcdcdc;">    posts/
</span><span style="color:#dcdcdc;">      create/▸
</span><span style="color:#dcdcdc;">      edit/▸
</span><span style="color:#dcdcdc;">    auth/
</span><span style="color:#dcdcdc;">      login/▸
</span><span style="color:#dcdcdc;">      register/
</span><span style="color:#dcdcdc;">        model.js
</span><span style="color:#dcdcdc;">        page.js
</span></pre>
<ol>
<li>Вложенность страниц должна отображать роутинг реального урла</li>
<li>Исходник компонента лежит в <code>page.js</code></li>
<li>Уникальная логика страницы лежит в <code>model.js</code></li>
<li>Любая обобщенная логика выносится в <a href="https://sova.dev/ru/why-utils-and-helpers-is-a-dump/">библиотечный код</a> <code>src/lib/lib-name/</code></li>
</ol>
<p>Примеры:</p>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">src/
  pages/
    post/
      page.js
      model.js
    repo/
      view/
        pulls/▸
        issues/
          view/
            page.js
            model.js
        page.js
        model.js
    index.js
</span></pre>
<ul>
<li>Страница поста в блоге
<ul>
<li>file: <code>src/pages/post/page.js</code></li>
<li>route: <code>/post/:postSlug</code> (или <code>/:postSlug</code>)</li>
<li>example: <code>/post/effector-model</code></li>
</ul>
</li>
<li>Просмотр issue репозитория
<ul>
<li>file: <code>src/pages/repo/view/issues/view/page.js</code></li>
<li>route: <code>/repo/:repoSlug/issues/:issueId</code></li>
<li>example: <code>/repo/effector/issues/5</code></li>
</ul>
</li>
</ul>
<h2 id="3-struktura-ui">3. Структура UI:</h2>
<pre style="background-color:#1e1e1e;">
<span style="color:#dcdcdc;">src/
</span><span style="color:#dcdcdc;">  ui/
</span><span style="color:#dcdcdc;">    atoms/
</span><span style="color:#dcdcdc;">      index.js
</span><span style="color:#dcdcdc;">      component-name/
</span><span style="color:#dcdcdc;">        index.js
</span><span style="color:#dcdcdc;">        readme.js
</span><span style="color:#dcdcdc;">        story.js
</span><span style="color:#dcdcdc;">        test.js
</span><span style="color:#dcdcdc;">    molecules/▸
</span><span style="color:#dcdcdc;">    organisms/▸
</span><span style="color:#dcdcdc;">    templates/▸
</span><span style="color:#dcdcdc;">    index.js
</span></pre>
<ol>
<li><a href="http://atomicdesign.bradfrost.com">Atomic Design</a></li>
<li>Весь UI это базовые блоки из которых можно собрать любую фичу.</li>
<li>UI должен быть оторван от фич и любых глобальных сторов</li>
<li>Компоненты должны быть максимально переиспользуемыми, независимыми от контекста <em>(не React Context API)</em></li>
</ol>

</article>

<div id="fb-root"></div>
<script async defer crossorigin="anonymous"
  src="https://connect.facebook.net/ru_RU/sdk.js#xfbml=1&version=v4.0&appId=715931972181656&autoLogAppEvents=1"></script>

<div class="fb-comments" data-href="https://sova.dev/ru/application-structure/" data-width="" data-numposts="10"></div>


  </div>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-67236238-5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-67236238-5');
  </script>

</body>

</html>
